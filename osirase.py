
import streamlit as st
from db_utils import load_notices, mark_notice_as_read

def show_notices():
    if "user" not in st.session_state or st.session_state["user"] is None:
        st.error("ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚")
        return

    st.title("ğŸ”” ãŠçŸ¥ã‚‰ã›")

    notices = load_notices()

    for notice in notices:
        status = "æœªèª­" if notice["æ—¢èª­"] == 0 else "æ—¢èª­"
        st.subheader(f"{notice['ã‚¿ã‚¤ãƒˆãƒ«']} - {status}")
        st.write(f"ğŸ“… {notice['æ—¥ä»˜']}")
        st.write(f"{notice['å†…å®¹']}")
        if notice["æ—¢èª­"] == 0:
            if st.button(f"æ—¢èª­ã«ã™ã‚‹ ({notice['id']})"):
                mark_notice_as_read(notice["id"])
                st.experimental_rerun()
